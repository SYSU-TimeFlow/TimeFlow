:root {
  /* 亮色模式的变量 */
  --bg-primary: #ffffff;
  --bg-secondary: #f9fafb;
  --bg-tertiary: #f3f4f6;
  --bg-sidebar: #f1f5f9;
  --text-primary: #111827;
  --text-secondary: #4b5563;
  --text-tertiary: #6b7280;
  --border-color: #e5e7eb;
  --hover-bg: #f3f4f6;
  --active-bg: #e5e7eb;
  --card-bg: #ffffff;
  --modal-bg: #ffffff; /* 亮色模式下的模态框背景 */
  --header-bg: #f8fafc;
  --selected-bg: #dbeafe;
  --event-hover-shadow: rgba(0, 0, 0, 0.12);
  --shadow-color: rgba(0, 0, 0, 0.1);
  --tooltip-bg: #374151;
  --tooltip-text: #ffffff;
}

/* 暗黑模式变量 */
.dark-mode {
  /* 基础背景色 - 参考 GitHub 深色模式 */
  --bg-primary: #0d1117;
  --bg-secondary: #161b22;
  --bg-tertiary: #21262d;
  --bg-sidebar: #161b22;

  /* 文本颜色 - GitHub 风格的灰度 */
  --text-primary: #e6edf3; /* 更亮的文本颜色 */
  --text-secondary: #c9d1d9; /* 次要文本更亮 */
  --text-tertiary: #8b949e; /* 第三级文本保持适中亮度 */

  /* 边框和分割线 */
  --border-color: #30363d;

  /* 交互状态 */
  --hover-bg: #1c2128;
  --active-bg: #21262d;

  /* 卡片和模态框 */
  --card-bg: #161b22;
  --modal-bg: #1c2128; /* 暗黑模式下的模态框背景 (比背景色稍亮的深灰) */
  --header-bg: #0d1117;

  /* 选中状态 - 蓝色主题 */
  --selected-bg: #1f6feb;

  /* 阴影效果 */
  --event-hover-shadow: rgba(0, 0, 0, 0.5);
  --shadow-color: rgba(0, 0, 0, 0.5);

  /* 提示框 */
  --tooltip-bg: #21262d;
  --tooltip-text: #e6edf3; /* 更亮的提示文本 */

  /* 日历相关 */
  --date-number-color: #c9d1d9; /* 更亮的日期数字 */
  --heading-color: #58a6ff; /* GitHub 风格的蓝色 */
  --calendar-day-bg: #161b22;
  --calendar-today-bg: #1f6feb33; /* 带透明度的蓝色 */
  --calendar-weekend-bg: #161b22;
  --calendar-day-hover-bg: #1c2128;
  --calendar-hour-hover-bg: #1c2128;

  /* 搜索框 */
  --search-bg: #0d1117;
  --search-border: #30363d;

  /* 按钮相关 - 蓝色主题 */
  --button-primary: #388bfd; /* GitHub 风格的蓝色 */
  --button-primary-hover: #58a6ff; /* 悬停时更亮的蓝色 */
  --button-secondary: #21262d;
  --active-item-bg: #1f6feb33; /* 带透明度的蓝色 */
  --active-item-border: #58a6ff; /* 更亮的蓝色边框 */

  /* 事件文本 - 更亮的颜色 */
  --event-title-color: #e6edf3; /* 更亮的事件标题 */
  --event-description-color: #c9d1d9; /* 更亮的事件描述 */
  --event-time-color: #c9d1d9; /* 更亮的时间文本 */
  --sidebar-title-color: #e6edf3; /* 更亮的侧边栏标题 */
  --hour-cell-hover: #1c2128;

  /* 图标颜色 */
  --icon-color: #c9d1d9; /* 默认图标颜色 */
  --icon-color-hover: #e6edf3; /* 悬停时的图标颜色 */
  --icon-color-active: #58a6ff; /* 激活状态的图标颜色 */

  /* 模态框相关 - 增强区分度和文字对比度 */
  --modal-bg: #1c2128; /* 比背景色稍亮的深灰 */
  --modal-header-bg: #21262d; /* 模态框头部背景 */
  --modal-footer-bg: #21262d; /* 模态框底部背景 */
  --modal-border: #30363d; /* 模态框边框 */
  --modal-text-primary-color: #e6edf3; 
  --modal-text-secondary-color: #8d8d8d; /* 次亮的模态框文本颜色 */
  --modal-title-color: #f0f6fc; /* 最亮的模态框标题，用于重要文字 */
  --modal-label-color: #e6edf3; /* 次亮的模态框标签，用于普通文字 */
  --modal-input-bg: #0d1117; /* 输入框背景更深，增强对比 */
  --modal-input-text: #f0f6fc; /* 输入框文字更亮 */
  --modal-input-border: #30363d; /* 输入框边框 */
  --modal-button-text: #ffffff; /* 按钮文字纯白 */
  --modal-button-bg: #58a6ff; /* 浅蓝色主按钮 */
  --modal-button-hover: #79b8ff; /* 浅蓝色按钮悬停 */
  --modal-button-secondary: #21262d; /* 次要按钮背景 */
  --modal-button-secondary-hover: #30363d; /* 次要按钮悬停 */
  --modal-shadow: 0 16px 32px rgba(1, 4, 9, 0.85); /* 更明显的阴影 */
}

/* ====================== pages ======================= */

/*  设置基础样式 (亮色模式) */
.event-modal, .settings-container {
  background-color: var(--modal-bg); /* 在亮色模式下使用 :root 中定义的 --modal-bg */
  color: var(--text-primary); /* 基础文字颜色 */
  /* 其他基础样式，如圆角、阴影等已由Vue组件中的Tailwind类处理 */
}

/* 暗黑模式下的模态框样式  */
.dark-mode .event-modal,
.dark-mode .settings-container {
  background-color: var(--modal-bg) !important; /* 使用 .dark-mode 中定义的 --modal-bg */
  color: var(--modal-text-primary-color); /* 使用 .dark-mode 中定义的 --modal-text-primary-color */
  border: 1px solid var(--modal-border);
  box-shadow: var(--modal-shadow);
}

.dark-mode .settings-container .text-secondary {
  color: var(--modal-text-secondary-color); /* 使用 .dark-mode 中定义的 --modal-text-secondary-color */
}

/* ====================== pages ======================= */

/* 覆盖各种组件的默认样式 */
.dark-mode .bg-blue-600 {
  background-color: var(--button-primary) !important;
}

.dark-mode .bg-blue-700,
.dark-mode .hover\:bg-blue-700:hover {
  background-color: var(--button-primary-hover) !important;
}

/* 覆盖ToDo视图中的白色背景 */
.dark-mode .bg-white {
  background-color: var(--bg-primary) !important;
}

/* 确保颜色过渡平滑 */
body,
html,
* {
  transition: background-color 0.3s, color 0.3s, border-color 0.3s;
}

/* 暗黑模式下的图标样式 */
.dark-mode i {
  color: var(--icon-color);
}

.dark-mode button:hover i {
  color: var(--icon-color-hover);
}

.dark-mode button.active i {
  color: var(--icon-color-active);
}

/* 暗黑模式下的模态框样式 */
.dark-mode .modal-header h3 {
  color: var(--modal-title-color);
}

/* 修改：确保 modal-header, modal-body, modal-footer 在暗黑模式下使用正确的背景 */
.dark-mode .modal-header,
.dark-mode .modal-body, /* 确保 modal-body 也应用暗黑模式背景 */
.dark-mode .modal-footer {
  border-color: var(--modal-border);
  background-color: var(--modal-bg); /* 确保这些部分也使用暗黑模式的 --modal-bg */
}


.dark-mode .modal-body label {
  color: var(--modal-label-color);
}

.dark-mode .modal-body input,
.dark-mode .modal-body textarea {
  background-color: var(--modal-input-bg);
  color: var(--modal-input-text);
  border-color: var(--modal-input-border);
  /* 确保暗黑模式下输入框焦点样式也由 theme.css 控制或与 Tailwind 协调 */
}

.dark-mode .modal-body input:focus,
.dark-mode .modal-body textarea:focus {
  border-color: #58a6ff !important; /* 来自原scoped CSS */
  box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.3) !important; /* 来自原scoped CSS */
}


.dark-mode .modal-footer button {
  color: var(--modal-button-text);
}

.dark-mode .modal-footer button.bg-blue-600 {
  background-color: var(--modal-button-bg);
}

.dark-mode .modal-footer button.bg-blue-600:hover {
  background-color: var(--modal-button-hover);
}

/* 暗黑模式下的分类选择器样式 (已存在) */
.dark-mode .category-option {
  box-shadow: 0 0 0 2px var(--modal-border), 0 2px 4px rgba(0, 0, 0, 0.4);
}

.dark-mode .category-option.border-gray-800 { /* 当 category-option 同时有 border-gray-800 (亮色模式选中) */
  box-shadow: 0 0 0 3px #58a6ff !important;
  border-color: #58a6ff !important;
}
